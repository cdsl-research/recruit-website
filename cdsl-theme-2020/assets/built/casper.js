!function(s){"use strict";var n={},e=Array.prototype.slice,i=Object.prototype.toString,o=["Top","Right","Bottom","Left"],r=["Attachment","Color","Image","Repeat","Position","Size","Clip","Origin"];function h(t){this.$el=s(t),this.index=0,this.config=s.extend({},h.defaultConfig),this._setupBackgroundElement(),this._listenToResize()}s.fn.bgswitcher=function(){var e=arguments,i=h.keys.instance;return this.each(function(){var t=s.data(this,i);t||(t=new h(this),s.data(this,i,t)),t.dispatch.apply(t,e)})},s.fn.bgSwitcher=s.fn.bgswitcher,s.extend(h.prototype,{dispatch:function(t){switch(i.call(t)){case"[object Object]":this.setConfig(t);break;case"[object String]":this[t].apply(this,e.call(arguments,1));break;default:throw new Error("Please specify a Object or String")}},setConfig:function(t){this.config=s.extend(this.config,t),void 0!==this.config.random&&(this.config.shuffle=this.config.random),this.refresh()},setImages:function(t){this.imageList=new this.constructor.ImageList(t),this.config.shuffle&&this.imageList.shuffle()},setSwitchHandler:function(t){this.switchHandler=s.proxy(t,this)},getBuiltInSwitchHandler:function(t){return this.constructor.switchHandlers[t||this.config.effect]},refresh:function(){this.setImages(this.config.images),this.setSwitchHandler(this.getBuiltInSwitchHandler()),this._prepareSwitching(),this.config.start&&this.start()},start:function(){this._timerID||(this._timerID=setTimeout(s.proxy(this,"next"),this.config.interval))},stop:function(){this._timerID&&(clearTimeout(this._timerID),this._timerID=null)},toggle:function(){this._timerID?this.stop():this.start()},reset:function(){this.index=0,this._prepareSwitching()},next:function(){var t=this.imageList.count();!this.config.loop&&this.index+1===t||(++this.index===t&&(this.index=0),this.switching())},prev:function(){!this.config.loop&&0===this.index||(-1==--this.index&&(this.index=this.imageList.count()-1),this.switching())},select:function(t){-1===t&&(t=this.imageList.count()-1),this.index=t,this.switching()},switching:function(){var t=!!this._timerID;t&&this.stop(),this._createSwitchableElement(),this._prepareSwitching(),this.switchHandler(this.$switchable),t&&this.start()},destroy:function(){this.stop(),this._stopListeningToResize(),this.$switchable&&(this.$switchable.stop(),this.$switchable.remove(),this.$switchable=null),this.$bg&&(this.$bg.remove(),this.$bg=null),this.$el.removeAttr("style"),this.$el.removeData(this.constructor.keys.instance),this.$el=null},_adjustRectangle:function(){for(var t,e=0,i=o.length,s=this.$el.position(),n={top:s.top,left:s.left,width:this.$el.innerWidth(),height:this.$el.innerHeight()};e<i;e++)n["margin"+(t=o[e])]=this.$el.css("margin"+t),n["border"+t]=this.$el.css("border"+t);this.$bg.css(n)},_setupBackgroundElement:function(){this.$bg=s(document.createElement("div")),this.$bg.css({position:"absolute",zIndex:(parseInt(this.$el.css("zIndex"),10)||0)-1,overflow:"hidden"}),this._copyBackgroundStyles(),this._adjustRectangle(),"BODY"===this.$el[0].tagName?this.$el.prepend(this.$bg):(this.$el.before(this.$bg),this.$el.css("background","none"))},_createSwitchableElement:function(){this.$switchable&&this.$switchable.remove(),this.$switchable=this.$bg.clone(),this.$switchable.css({top:0,left:0,margin:0,border:"none"}),this.$switchable.appendTo(this.$bg)},_copyBackgroundStyles:function(){for(var t,e={},i=0,s=r.length,n="backgroundPosition";i<s;i++)e[t="background"+r[i]]=this.$el.css(t);void 0===e[n]&&(e[n]=[this.$el.css(n+"X"),this.$el.css(n+"Y")].join(" ")),this.$bg.css(e)},_listenToResize:function(){var t=this;this._resizeHandler=function(){t._adjustRectangle()},s(window).on("resize",this._resizeHandler)},_stopListeningToResize:function(){s(window).off("resize",this._resizeHandler),this._resizeHandler=null},_prepareSwitching:function(){this.$bg.css("backgroundImage",this.imageList.url(this.index))}}),h.keys={instance:"bgSwitcher"},h.defaultConfig={images:[],interval:5e3,start:!0,loop:!0,shuffle:!1,effect:"fade",duration:1e3,easing:"swing"},h.switchHandlers={fade:function(t){t.animate({opacity:0},this.config.duration,this.config.easing)},blind:function(t){t.animate({height:0},this.config.duration,this.config.easing)},clip:function(t){t.animate({top:parseInt(t.css("top"),10)+t.height()/2,height:0},this.config.duration,this.config.easing)},slide:function(t){t.animate({top:-t.height()},this.config.duration,this.config.easing)},drop:function(t){t.animate({left:-t.width(),opacity:0},this.config.duration,this.config.easing)},hide:function(t){t.hide()}},h.defineEffect=function(t,e){this.switchHandlers[t]=e},h.ImageList=function(t){this.images=t,this.createImagesBySequence(),this.preload()},s.extend(h.ImageList.prototype,{isSequenceable:function(){return"string"==typeof this.images[0]&&"number"==typeof this.images[1]&&"number"==typeof this.images[2]},createImagesBySequence:function(){if(this.isSequenceable()){for(var t=[],e=this.images[0],i=this.images[1],s=this.images[2];t.push(e.replace(/\.\w+$/,i+"$&")),++i<=s;);this.images=t}},preload:function(){for(var t,e=this.images.length,i=0;i<e;i++)t=this.images[i],n[t]||(n[t]=new Image,n[t].src=t)},shuffle:function(){var t,e,i=this.images.length,s=this.images.join();if(i){for(;i;)t=Math.floor(Math.random()*i),e=this.images[--i],this.images[i]=this.images[t],this.images[t]=e;this.images.join()===s&&this.shuffle()}},get:function(t){return this.images[t]},url:function(t){return"url("+this.get(t)+")"},count:function(){return this.images.length}}),s.BgSwitcher=h}(jQuery),function(n){"use strict";n.fn.fitVids=function(t){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',e.appendChild(s.childNodes[1])}return t&&n.extend(i,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&t.push(i.customSelector);var s=".fitvidsignore";i.ignore&&(s=s+", "+i.ignore);var e=n(this).find(t.join(","));(e=(e=e.not("object object")).not(s)).each(function(){var t=n(this);if(!(0<t.parents(s).length||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var e=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("name")){var i="fitvid"+n.fn.fitVids._count;t.attr("name",i),n.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),t.removeAttr("height").removeAttr("width")}})})},n.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(t){t.addEventListener("DOMContentLoaded",function(){t.querySelectorAll(".kg-gallery-image img").forEach(function(t){var e=t.closest(".kg-gallery-image"),i=t.attributes.width.value/t.attributes.height.value;e.style.flex=i+" 1 0%"})})}((window,document)),function(e,i){var s=i.querySelector("link[rel=next]");if(s){var n=i.querySelector(".post-feed");if(n){var o=300,r=!1,h=!1,a=e.scrollY,c=e.innerHeight,l=i.documentElement.scrollHeight;e.addEventListener("scroll",u,{passive:!0}),e.addEventListener("resize",g),f()}}function d(){if(404===this.status)return e.removeEventListener("scroll",u),void e.removeEventListener("resize",g);this.response.querySelectorAll(".post-card").forEach(function(t){n.appendChild(i.importNode(t,!0))});var t=this.response.querySelector("link[rel=next]");t?s.href=t.href:(e.removeEventListener("scroll",u),e.removeEventListener("resize",g)),l=i.documentElement.scrollHeight,h=r=!1}function t(){if(!h)if(a+c<=l-o)r=!1;else{h=!0;var t=new e.XMLHttpRequest;t.responseType="document",t.addEventListener("load",d),t.open("GET",s.href),t.send(null)}}function f(){r||e.requestAnimationFrame(t),r=!0}function u(){a=e.scrollY,f()}function g(){c=e.innerHeight,l=i.documentElement.scrollHeight,f()}}(window,document),function(r,h){r.Casper||(r.Casper={}),r.Casper.stickyNavTitle=function(t){var e=h.querySelector(t.navSelector),i=h.querySelector(t.titleSelector),s=r.scrollY,n=!1;function o(){i.getBoundingClientRect().top+r.scrollY+(i.offsetHeight+35)<=s?e.classList.add(t.activeClass):e.classList.remove(t.activeClass),n=!1}r.addEventListener("scroll",function(){s=r.scrollY,function(){n||requestAnimationFrame(o);n=!0}()},{passive:!0}),o()}}(window,document);
//# sourceMappingURL=casper.js.map